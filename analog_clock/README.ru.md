:globe_with_meridians:  [english](README.md)	[český](README.cz.md)	**<u>русский</u>**

# Код проекта стимпанк часов Flutter Clock

## Содержание:
* [Описание](#Описание)
* [Изменения](#Изменения)
* [Известные проблемы](#Известные-проблемы)
  * [Сборка APK файлов](#Сборка-APK-файлов)
  * [Плохая производительность на некоторых устройствах](#Плохая-производительность)
* [Технические данные](#Технические-данные)

----
## Описание
Здесь находится весь код, относящийся к проекту стимпанк часов, конкурса Flutter Clock. Написание кода было регулировано правилами конкурса, больше о правилах, на английском языке, вы можете прочитать тут: [flutter.dev/clock](https://flutter.dev/clock).
## Изменения
Главные изменения, которые были сделаны, исходя из примера от Гугла:
* удалены неиспользуемые файлы и папки,
* в этой [корневой](./) папке:
    * добавлены записи в [.gitignore](./.gitignore) файл,
    * добавлены [README.md](./README.md) файлы на разных языках,
    * [pubspec.yaml](./pubspec.yaml) — добавлена зависимость [Rive](https://rive.app) (бывшее Flare), изменено описание и версия фреймворка повышена на 2.7.0,
* в папке [lib](./lib):
    * [main.dart](./lib/main.dart) — настроен ландшафтный и полноэкранный режим, кэширование анимации, остальное без изменений,
    * [analog_clock.dart](./lib/analog_clock.dart) — удалены неиспользуемые переменные, декларирован контроллер анимации и изменены два метода, остальное без изменений,
    * добавлены [animation_controller.dart](./lib/animation_controller.dart) и [temperature_converter.dart](./lib/temperature_converter.dart),
* в папке [assets](./assets) — неиспользованная графика была заменена файлом анимации,
* в папке [ios](./ios) — аппликация настроена на запуск в ландшафтном режиме, добавлено уникальное название,
* в папке [android](./android) — изменён файл [build.gradle](./android/build.gradle) (смотрите Известные проблемы),
* добавлена папка [third_party](./third_party) с шрифтом и его лицензией.

**Добавленный или изменённый код был комментирован**, дабы было понятно, что он делает.
## Известные проблемы
На Андроид платформе имеются следующие технические проблемы:
#### Сборка APK файлов
Создание любого APK файла заканчивается ошибкой в терминале. Что бы исправить это, необходимо изменить зависимости в сценарии сборки, файла [build.gradle](./android/build.gradle) (в папке android). Последняя правильно работающая версия: 3.4.2, поэтому измените строку номер 9:
```markdown
classpath 'com.android.tools.build:gradle:3.5.0'
```
на
```markdown
classpath 'com.android.tools.build:gradle:3.4.2'
```
Проблема должна пропасть.

#### Плохая производительность
Анимации были приготовлены с частой кадров до **25 кадров в секунду**, тем не менее, на данный момент (январь 2020), некоторые Андроид устройства, не отображаются эти анимации плавно. Существует несколько открытых [Проблем](https://github.com/2d-inc/Flare-Flutter/issues) в репозитории flare_flutter относящиеся к плохой производительности сложных анимаций и команда Rive работает над их устранением. Скорее всего в этом году они выпустят среду выполнения, их инструмента и для платформы Андроид (по крайней мере это запланировано в их [Roadmap](https://portal.productboard.com/rive/1-roadmap/c/56-android-runtime)), поэтому в зависимости от даты, когда вы это читаете — у вас или будут или не появятся  подобные проблемы. В случае, если всё же у вас возникнут проблемы с производительностью, попробуйте заменить в зависимостях официальный пакет flare_flutter на [мой форк этого пакета](https://github.com/tsinis/flare-flutter), версии 1.8.3, с отключённым сглаживанием. Внутри файла [pubspec.yaml](./pubspec.yaml) (в этой корневой папке) поменяйте строку:
```markdown
  flare_flutter: ^1.8.3
```
на:
````markdown
  flare_flutter:
    git:
      url: git://github.com/tsinis/Flare-Flutter.git
      ref: stable
      path: flare_flutter
````
> **Примечание:** видимо, эта проблема зависит от конкретного устройства, так как я успешно запустил, даже отладочную версию приложения, без каких либо серьёзных потерь кадров, на планшете 2013 года, под управелнием ОС android_x86_64.

**На устройствах с системой iOS (айфоны) я не нашёл никаких проблем**, но прошу посылать отчёт или ваши решения, в секцию Issues.

## Технические данные

| Название | Описание |
| ---- | ----------- |
| **Название фреймворка** | [Flutter](https://flutter.dev) |
| Версия фреймворка | [1.12.13+hotfix.5](https://github.com/flutter/flutter) |
| Канал фреймворка | стабильный |
| **Название языка** | [Dart](https://dart.dev) |
| Версия языка | [2.7.0](https://github.com/dart-lang) |
| Канал языка | стабильный |
| **Название ИСР** | [Visual Studio Code](https://code.visualstudio.com/insiders/) |
| Версия ИСР | [1.42.0](https://github.com/microsoft/vscode) |
| Канал ИСР | предварительный |
| Название **сопредельной** зависимости | Flutter Clock Helper |
| Пакет **сопредельной** зависимости | [flutter_clock_helper](../flutter_clock_helper) |
| Название сторонней зависимости | [Rive](https://rive.app) (бывшее Flare) |
| Пакет сторонней зависимости | [flare_flutter](https://pub.dev/packages/flare_flutter) |
| Версия сторонней зависимости | [1.8.3](https://github.com/2d-inc/Flare-Flutter) |
| Канал сторонней зависимости | стабильный |
| Архитектура | По умолчанию (слушатель) |